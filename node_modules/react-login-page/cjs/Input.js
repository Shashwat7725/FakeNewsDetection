"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault")["default"];
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard")["default"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Input = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _objectSpread5 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _react = _interopRequireWildcard(require("react"));
var _store = require("./store");
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["rename", "keyname", "visible", "children"];
var Input = exports.Input = /*#__PURE__*/(0, _react.memo)(function (props) {
  var _useStore = (0, _store.useStore)(),
    _useStore$fields = _useStore.fields,
    fields = _useStore$fields === void 0 ? {} : _useStore$fields,
    _useStore$extra = _useStore.extra,
    extra = _useStore$extra === void 0 ? {} : _useStore$extra,
    _useStore$$$index = _useStore.$$index,
    $$index = _useStore$$$index === void 0 ? {} : _useStore$$$index,
    dispatch = _useStore.dispatch;
  var rename = props.rename,
    keyname = props.keyname,
    _props$visible = props.visible,
    visible = _props$visible === void 0 ? true : _props$visible,
    children = props.children,
    elmProps = (0, _objectWithoutProperties2["default"])(props, _excluded);
  (0, _react.useEffect)(function () {
    if (keyname || elmProps.name) {
      var key = keyname || elmProps.name;
      delete $$index[key];
      delete fields[key];
      delete extra[key];
      dispatch({
        $$index: (0, _objectSpread5["default"])((0, _objectSpread5["default"])({}, $$index), {}, (0, _defineProperty2["default"])({}, key, elmProps.index || 0)),
        extra: (0, _objectSpread5["default"])((0, _objectSpread5["default"])({}, extra), {}, (0, _defineProperty2["default"])({}, key, children || null)),
        fields: (0, _objectSpread5["default"])((0, _objectSpread5["default"])({}, fields), {}, (0, _defineProperty2["default"])({}, key, visible ? /*#__PURE__*/(0, _jsxRuntime.jsx)("input", (0, _objectSpread5["default"])((0, _objectSpread5["default"])({}, elmProps), {}, {
          name: rename || elmProps.name
        })) : null))
      });
    }
  }, [props]);
  return null;
});
Input.displayName = 'Login.Input';