"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault")["default"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Block = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _objectSpread3 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _react = require("react");
var _store = require("./store");
var _excluded = ["name", "keyname", "visible", "tagName"];
var Block = exports.Block = /*#__PURE__*/(0, _react.memo)(function (props) {
  var _useStore = (0, _store.useStore)(),
    _useStore$blocks = _useStore.blocks,
    blocks = _useStore$blocks === void 0 ? {} : _useStore$blocks,
    dispatch = _useStore.dispatch;
  var name = props.name,
    keyname = props.keyname,
    _props$visible = props.visible,
    visible = _props$visible === void 0 ? true : _props$visible,
    _props$tagName = props.tagName,
    tagName = _props$tagName === void 0 ? 'div' : _props$tagName,
    elmProps = (0, _objectWithoutProperties2["default"])(props, _excluded);
  (0, _react.useEffect)(function () {
    if (name || keyname) {
      var key = keyname || name;
      var div = visible ? /*#__PURE__*/(0, _react.createElement)(tagName, (0, _objectSpread3["default"])({}, elmProps), elmProps.children) : null;
      delete blocks[key];
      dispatch({
        blocks: (0, _objectSpread3["default"])((0, _objectSpread3["default"])({}, blocks), {}, (0, _defineProperty2["default"])({}, key, div))
      });
    }
  }, [props]);
  return null;
});
Block.displayName = 'Login.Block';